<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no">
    <title>Flux - Web Panel</title>
</head>

<body>
    <div class="wrapper">
        <section class="top-menu"></section>
        <section class="content">
            <div class="spinner-flip absolute-center"></div>
        </section>
    </div>
</body>
<script>
    (function() {
        var script = document.createElement('script'),
            analytics = document.createElement('script'),
            cssLink = document.createElement('link'),
            head = document.querySelector('head'),
            body = document.querySelector('body'),
            timer;

        // set global definition
        timer = setInterval(function() {
            var nodeProcess = process || {},
                env = nodeProcess.env || {};

            if ('undefined' !== typeof env.ghostPort) {
                window.FLUX.ghostPort = env.ghostPort;
                script.setAttribute('src', 'js/require.js');
                script.dataset.main = 'js/main.js?v=' + window.FLUX.timestamp;
                body.appendChild(script);
                clearInterval(timer);
            }
            else {
                // TODO: load fail?
            }
        }, 1000);

        window.FLUX = {
            debug: -1 !== location.search.indexOf('debug'),
            timestamp: (new Date()).getTime()
        };

        cssLink.setAttribute('rel', 'stylesheet');
        cssLink.setAttribute('href', 'css/main.css?v=' + window.FLUX.timestamp);
        head.appendChild(cssLink);
        head.appendChild(cssLink);

        analytics.setAttribute('src', 'https://www.google-analytics.com/analytics.js');
        analytics.setAttribute('async', true);
        body.appendChild(analytics);
    })();
</script>

</html>